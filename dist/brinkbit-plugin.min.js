!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["brinkbit-plugin"]=e():t["brinkbit-plugin"]=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(6),a=n(10),c=n(11),s=n(12),f=n(13),l=n(3),p=n(4),d=n(9),y=n(33),h=n(34),v=n(35),b=function(){function t(e,n){r(this,t),l.constructor(n,{type:{dataType:"string",presence:!0,inclusion:["player","game","core"]},player:{dataType:"object"},initialData:{dataType:"object"},defaults:{dataType:"object"},read:{dataType:"array"},write:{dataType:"array"},middleware:{dataType:"object"},pluginId:{presence:!0,dataType:"string"}});var o=n.initialData,i=void 0===o?{}:o,a=n.defaults,c=void 0===a?{}:a,s=n.type,f=n.read,p=n.write,d=n.middleware,y=void 0===d?{}:d,h=n.player,v=void 0===h?e.Player.primary:h,b=n.pluginId;this.pluginId=b,this.player=v,this.brinkbit=e,this.read=f,this.write=p,this.type=s,this.middleware=y;var m=u({},c,i);l.constructor(m,{_id:{dataType:"string"}}),this.data=m,"core"===s&&m._id&&(this.id=i._id)}return i(t,[{key:"getPlayer",value:function(){if(!this.player&&!this.brinkbit.Player.primary)throw new Error("No player logged in");var t=this.player||this.brinkbit.Player.primary;if(!t.token||!t.id)throw new Error("No player logged in");return t}},{key:"validate",value:function(){return Promise.resolve()}},{key:"getUrl",value:function(t){var e=this.id||this.data._id;if("core"===this.type)switch(t){case"post":return"./"+this.pluginId+"/";default:return"./"+this.pluginId+"/"+e+"/"}return"player"===this.type?"./data/"+this.pluginId+"/players/"+this.getPlayer().id+"/keys/"+e:"./data/"+this.pluginId+"/keys/"+e}},{key:"fetch",value:function(){var t=this,e=d.apply(void 0,arguments);e.token=this.token,e.uri=e.uri||this.getUrl("get");var n=this.processMiddleware("fetch",e),r=this.validate("get",n).then(function(){return t.brinkbit._get(e)}).then(function(e){return u(t.data,t.readable("core"===t.type?e.body:e.body.dataValue)),t.emit("fetch",new h("fetch",e)),e});return y(r,e)}},{key:"save",value:function(){var t=this,e=d.apply(void 0,arguments);e.body&&this.set(e.body),e.token=this.token||this.getPlayer().token,e.method=e.method||(this.id?"put":"post"),e.body="put"===e.method||"post"===e.method?this.writeable(this.data):void 0,e.uri=e.uri||this.getUrl(e.method);var n=this.processMiddleware("save",e),r=this.validate(n.method,n.body),i=function(){if("object"===(void 0===r?"undefined":o(r))){if("function"==typeof r.then)return r;if(r instanceof p||r instanceof Error||r instanceof TypeError)return Promise.reject(r);var t=new p;return t.details=r,Promise.reject(t)}return"string"==typeof r?Promise.reject(r):Promise.resolve()}().then(function(){return t.brinkbit._request(n)}).then(function(e){return u(t.data,t.readable("core"===t.type?e.body:e.body.dataValue)),t.data._id&&(t.id=t.data._id),t.emit("save",new h("save",e)),e});return y(i,e)}},{key:"destroy",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.uri=this.getUrl("delete"),e.token=this.token||this.getPlayer().token;var n=this.processMiddleware("destroy",e);return this.validate("delete").then(function(){return t.brinkbit._delete(n)}).then(function(e){return t.id=void 0,t.data.id=void 0,e})}},{key:"get",value:function(t){if("object"!==(void 0===t?"undefined":o(t))&&"string"!=typeof t)throw new Error((void 0===t?"undefined":o(t))+" is not a valid type for path");return"string"==typeof attr?c(this.data,t):a(this.data,t)}},{key:"set",value:function(t,e){if("object"===(void 0===t?"undefined":o(t)))u(this.data,this.writeable(t));else{if("string"!=typeof t)throw new Error((void 0===t?"undefined":o(t))+" is not a valid type for path");if(this.write&&!this.write.includes(t))throw new Error("Path "+t+" is not writeable!");s(this.data,t,e)}}},{key:"writeable",value:function(t){return this.write?a(t,this.write):t}},{key:"readable",value:function(t){return this.read?a(t,this.read):t}},{key:"processMiddleware",value:function(t,e){return"object"===o(this.middleware)&&"function"==typeof this.middleware[t]?this.middleware[t](e):e}}],[{key:"create",value:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=new(Function.prototype.bind.apply(this,[null].concat(e)));return r.save().then(function(){return r})}}]),t}();f(b.prototype),b.defaults=v,t.exports=b},function(t,e,n){"use strict";var r,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"===("undefined"==typeof window?"undefined":o(window))&&(r=window)}t.exports=r},function(t,e,n){"use strict";var r=n(21)();t.exports=function(t){return t!==r&&null!==t}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(29),i=n(4);o.validators.dataType=function(t,e){return null===t||void 0===t||o["is"+o.capitalize(e)](t)?null:"is not of type "+e},o.validators.instanceOf=function(t,e){return null===t||void 0===t||t instanceof e};var u=function(t,e){var n=o(t,e);return n?Promise.reject(new i({message:n.error,details:n})):Promise.resolve()};u.constructor=function(t,e){if("object"!==(void 0===t?"undefined":r(t)))throw new TypeError("config must be an object");var n=o(t,e);if(n)throw new i({message:n.error,details:n})},t.exports=u},function(t,e,n){"use strict";var r=n(30)("ValidationError",{message:"Validation failed",details:[]});t.exports=r},function(t,e,n){"use strict";var r=n(37),o=n(38);t.exports=function(t,e,n){var i=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null);var u=(t=t||{}).random||(t.rng||r)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,e)for(var a=0;a<16;++a)e[i+a]=u[a];return e||o(u)}},function(t,e,n){"use strict";(function(t,n){function r(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function u(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n,t););return t}function a(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function c(t,e,n,r){var o=-1,i=t?t.length:0;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}function s(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function f(t,e){return null==t?void 0:t[e]}function l(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function p(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function d(t,e){return function(n){return t(e(n))}}function y(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function h(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function v(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function b(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function m(t){this.__data__=new v(t)}function g(t,e){var n=Ne(t)||ot(t)?s(t.length,String):[],r=n.length,o=!!r;for(var i in t)!e&&!fe.call(t,i)||o&&("length"==i||W(i,r))||n.push(i);return n}function _(t,e,n){(void 0===n||rt(t[e],n))&&("number"!=typeof e||void 0!==n||e in t)||(t[e]=n)}function w(t,e,n){var r=t[e];fe.call(t,e)&&rt(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function j(t,e){for(var n=t.length;n--;)if(rt(t[n][0],e))return n;return-1}function O(t,e){return t&&q(e,dt(e),t)}function E(t,e,n,r,o,i,a){var c;if(r&&(c=i?r(t,o,i,a):r(t)),void 0!==c)return c;if(!st(t))return t;var s=Ne(t);if(s){if(c=H(t),!e)return L(t,c)}else{var f=Ve(t),p=f==jt||f==Ot;if(Le(t))return C(t,e);if(f==xt||f==gt||p&&!i){if(l(t))return i?t:{};if(c=X(p?{}:t),!e)return U(t,O(c,t))}else{if(!Xt[f])return i?t:{};c=J(t,f,E,e)}}a||(a=new m);var d=a.get(t);if(d)return d;if(a.set(t,c),!s)var y=n?B(t):dt(t);return u(y||t,function(o,i){y&&(o=t[i=o]),w(c,i,E(o,e,n,r,i,t,a))}),c}function S(t){return st(t)?me(t):{}}function x(t,e,n){var r=e(t);return Ne(t)?r:a(r,n(t))}function k(t){return!(!st(t)||Q(t))&&(at(t)||l(t)?de:Gt).test(nt(t))}function P(t){if(!tt(t))return Oe(t);var e=[];for(var n in Object(t))fe.call(t,n)&&"constructor"!=n&&e.push(n);return e}function A(t){if(!st(t))return et(t);var e=tt(t),n=[];for(var r in t)("constructor"!=r||!e&&fe.call(t,r))&&n.push(r);return n}function T(t,e,n,r,o){if(t!==e){if(!Ne(e)&&!qe(e))var i=A(e);u(i||e,function(u,a){if(i&&(u=e[a=u]),st(u))o||(o=new m),F(t,e,a,n,T,r,o);else{var c=r?r(t[a],u,a+"",t,e,o):void 0;void 0===c&&(c=u),_(t,a,c)}})}}function F(t,e,n,r,o,i,u){var a=t[n],c=e[n],s=u.get(c);if(s)_(t,n,s);else{var f=i?i(a,c,n+"",t,e,u):void 0,l=void 0===f;l&&(f=c,Ne(c)||qe(c)?Ne(a)?f=a:ut(a)?f=L(a):(l=!1,f=E(c,!0)):lt(c)||ot(c)?ot(a)?f=pt(a):!st(a)||r&&at(a)?(l=!1,f=E(c,!0)):f=a:l=!1),l&&(u.set(c,f),o(f,c,r,i,u),u.delete(c)),_(t,n,f)}}function I(t,e){return e=Ee(void 0===e?t.length-1:e,0),function(){for(var n=arguments,r=-1,o=Ee(n.length-e,0),u=Array(o);++r<o;)u[r]=n[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=n[r];return a[e]=u,i(t,this,a)}}function C(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function z(t){var e=new t.constructor(t.byteLength);return new ve(e).set(new ve(t)),e}function M(t,e){var n=e?z(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function R(t,e,n){return c(e?n(p(t),!0):p(t),r,new t.constructor)}function $(t){var e=new t.constructor(t.source,Bt.exec(t));return e.lastIndex=t.lastIndex,e}function D(t,e,n){return c(e?n(y(t),!0):y(t),o,new t.constructor)}function V(t){return $e?Object($e.call(t)):{}}function N(t,e){var n=e?z(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function L(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function q(t,e,n,r){n||(n={});for(var o=-1,i=e.length;++o<i;){var u=e[o],a=r?r(n[u],t[u],u,n,t):void 0;w(n,u,void 0===a?t[u]:a)}return n}function U(t,e){return q(t,De(t),e)}function B(t){return x(t,dt,De)}function G(t,e){var n=t.__data__;return Z(e)?n["string"==typeof e?"string":"hash"]:n.map}function K(t,e){var n=f(t,e);return k(n)?n:void 0}function H(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&fe.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function X(t){return"function"!=typeof t.constructor||tt(t)?{}:S(be(t))}function J(t,e,n,r){var o=t.constructor;switch(e){case It:return z(t);case _t:case wt:return new o(+t);case Ct:return M(t,r);case zt:case Mt:case Rt:case $t:case Dt:case Vt:case Nt:case Lt:case qt:return N(t,r);case Et:return R(t,r,n);case St:case At:return new o(t);case kt:return $(t);case Pt:return D(t,r,n);case Tt:return V(t)}}function W(t,e){return!!(e=null==e?mt:e)&&("number"==typeof t||Kt.test(t))&&t>-1&&t%1==0&&t<e}function Y(t,e,n){if(!st(n))return!1;var r=void 0===e?"undefined":ht(e);return!!("number"==r?it(n)&&W(e,n.length):"string"==r&&e in n)&&rt(n[e],t)}function Z(t){var e=void 0===t?"undefined":ht(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function Q(t){return!!ce&&ce in t}function tt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ue)}function et(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function nt(t){if(null!=t){try{return se.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function rt(t,e){return t===e||t!==t&&e!==e}function ot(t){return ut(t)&&fe.call(t,"callee")&&(!ge.call(t,"callee")||pe.call(t)==gt)}function it(t){return null!=t&&ct(t.length)&&!at(t)}function ut(t){return ft(t)&&it(t)}function at(t){var e=st(t)?pe.call(t):"";return e==jt||e==Ot}function ct(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=mt}function st(t){var e=void 0===t?"undefined":ht(t);return!!t&&("object"==e||"function"==e)}function ft(t){return!!t&&"object"==(void 0===t?"undefined":ht(t))}function lt(t){if(!ft(t)||pe.call(t)!=xt||l(t))return!1;var e=be(t);if(null===e)return!0;var n=fe.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&se.call(n)==le}function pt(t){return q(t,yt(t))}function dt(t){return it(t)?g(t):P(t)}function yt(t){return it(t)?g(t,!0):A(t)}var ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vt=200,bt="__lodash_hash_undefined__",mt=9007199254740991,gt="[object Arguments]",_t="[object Boolean]",wt="[object Date]",jt="[object Function]",Ot="[object GeneratorFunction]",Et="[object Map]",St="[object Number]",xt="[object Object]",kt="[object RegExp]",Pt="[object Set]",At="[object String]",Tt="[object Symbol]",Ft="[object WeakMap]",It="[object ArrayBuffer]",Ct="[object DataView]",zt="[object Float32Array]",Mt="[object Float64Array]",Rt="[object Int8Array]",$t="[object Int16Array]",Dt="[object Int32Array]",Vt="[object Uint8Array]",Nt="[object Uint8ClampedArray]",Lt="[object Uint16Array]",qt="[object Uint32Array]",Ut=/[\\^$.*+?()[\]{}|]/g,Bt=/\w*$/,Gt=/^\[object .+?Constructor\]$/,Kt=/^(?:0|[1-9]\d*)$/,Ht={};Ht[zt]=Ht[Mt]=Ht[Rt]=Ht[$t]=Ht[Dt]=Ht[Vt]=Ht[Nt]=Ht[Lt]=Ht[qt]=!0,Ht[gt]=Ht["[object Array]"]=Ht[It]=Ht[_t]=Ht[Ct]=Ht[wt]=Ht["[object Error]"]=Ht[jt]=Ht[Et]=Ht[St]=Ht[xt]=Ht[kt]=Ht[Pt]=Ht[At]=Ht[Ft]=!1;var Xt={};Xt[gt]=Xt["[object Array]"]=Xt[It]=Xt[Ct]=Xt[_t]=Xt[wt]=Xt[zt]=Xt[Mt]=Xt[Rt]=Xt[$t]=Xt[Dt]=Xt[Et]=Xt[St]=Xt[xt]=Xt[kt]=Xt[Pt]=Xt[At]=Xt[Tt]=Xt[Vt]=Xt[Nt]=Xt[Lt]=Xt[qt]=!0,Xt["[object Error]"]=Xt[jt]=Xt[Ft]=!1;var Jt="object"==(void 0===t?"undefined":ht(t))&&t&&t.Object===Object&&t,Wt="object"==("undefined"==typeof self?"undefined":ht(self))&&self&&self.Object===Object&&self,Yt=Jt||Wt||Function("return this")(),Zt="object"==ht(e)&&e&&!e.nodeType&&e,Qt=Zt&&"object"==ht(n)&&n&&!n.nodeType&&n,te=Qt&&Qt.exports===Zt,ee=te&&Jt.process,ne=function(){try{return ee&&ee.binding("util")}catch(t){}}(),re=ne&&ne.isTypedArray,oe=Array.prototype,ie=Function.prototype,ue=Object.prototype,ae=Yt["__core-js_shared__"],ce=function(){var t=/[^.]+$/.exec(ae&&ae.keys&&ae.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),se=ie.toString,fe=ue.hasOwnProperty,le=se.call(Object),pe=ue.toString,de=RegExp("^"+se.call(fe).replace(Ut,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=te?Yt.Buffer:void 0,he=Yt.Symbol,ve=Yt.Uint8Array,be=d(Object.getPrototypeOf,Object),me=Object.create,ge=ue.propertyIsEnumerable,_e=oe.splice,we=Object.getOwnPropertySymbols,je=ye?ye.isBuffer:void 0,Oe=d(Object.keys,Object),Ee=Math.max,Se=K(Yt,"DataView"),xe=K(Yt,"Map"),ke=K(Yt,"Promise"),Pe=K(Yt,"Set"),Ae=K(Yt,"WeakMap"),Te=K(Object,"create"),Fe=nt(Se),Ie=nt(xe),Ce=nt(ke),ze=nt(Pe),Me=nt(Ae),Re=he?he.prototype:void 0,$e=Re?Re.valueOf:void 0;h.prototype.clear=function(){this.__data__=Te?Te(null):{}},h.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},h.prototype.get=function(t){var e=this.__data__;if(Te){var n=e[t];return n===bt?void 0:n}return fe.call(e,t)?e[t]:void 0},h.prototype.has=function(t){var e=this.__data__;return Te?void 0!==e[t]:fe.call(e,t)},h.prototype.set=function(t,e){return this.__data__[t]=Te&&void 0===e?bt:e,this},v.prototype.clear=function(){this.__data__=[]},v.prototype.delete=function(t){var e=this.__data__,n=j(e,t);return!(n<0||(n==e.length-1?e.pop():_e.call(e,n,1),0))},v.prototype.get=function(t){var e=this.__data__,n=j(e,t);return n<0?void 0:e[n][1]},v.prototype.has=function(t){return j(this.__data__,t)>-1},v.prototype.set=function(t,e){var n=this.__data__,r=j(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},b.prototype.clear=function(){this.__data__={hash:new h,map:new(xe||v),string:new h}},b.prototype.delete=function(t){return G(this,t).delete(t)},b.prototype.get=function(t){return G(this,t).get(t)},b.prototype.has=function(t){return G(this,t).has(t)},b.prototype.set=function(t,e){return G(this,t).set(t,e),this},m.prototype.clear=function(){this.__data__=new v},m.prototype.delete=function(t){return this.__data__.delete(t)},m.prototype.get=function(t){return this.__data__.get(t)},m.prototype.has=function(t){return this.__data__.has(t)},m.prototype.set=function(t,e){var n=this.__data__;if(n instanceof v){var r=n.__data__;if(!xe||r.length<vt-1)return r.push([t,e]),this;n=this.__data__=new b(r)}return n.set(t,e),this};var De=we?d(we,Object):function(){return[]},Ve=function(t){return pe.call(t)};(Se&&Ve(new Se(new ArrayBuffer(1)))!=Ct||xe&&Ve(new xe)!=Et||ke&&"[object Promise]"!=Ve(ke.resolve())||Pe&&Ve(new Pe)!=Pt||Ae&&Ve(new Ae)!=Ft)&&(Ve=function(t){var e=pe.call(t),n=e==xt?t.constructor:void 0,r=n?nt(n):void 0;if(r)switch(r){case Fe:return Ct;case Ie:return Et;case Ce:return"[object Promise]";case ze:return Pt;case Me:return Ft}return e});var Ne=Array.isArray,Le=je||function(){return!1},qe=re?function(t){return function(e){return t(e)}}(re):function(t){return ft(t)&&ct(t.length)&&!!Ht[pe.call(t)]},Ue=function(t){return I(function(e,n){var r=-1,o=n.length,i=o>1?n[o-1]:void 0,u=o>2?n[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,u&&Y(n[0],n[1],u)&&(i=o<3?void 0:i,o=1),e=Object(e);++r<o;){var a=n[r];a&&t(e,a,r,i)}return e})}(function(t,e,n){T(t,e,n)});n.exports=Ue}).call(e,n(1),n(7)(t))},function(t,e,n){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(){var t,e={};if("object"===r(arguments.length<=0?void 0:arguments[0])?e=arguments.length<=0?void 0:arguments[0]:"object"===r(arguments.length<=1?void 0:arguments[1])?e=arguments.length<=1?void 0:arguments[1]:"string"==typeof(arguments.length<=1?void 0:arguments[1])&&(e.token=arguments.length<=1?void 0:arguments[1]),"string"==typeof(arguments.length<=0?void 0:arguments[0])&&(e.uri=arguments.length<=0?void 0:arguments[0]),arguments.length>0&&"function"==(t=arguments.length-1,typeof(arguments.length<=t?void 0:arguments[t]))){var n;e.callback=(n=arguments.length-1,arguments.length<=n?void 0:arguments[n])}return e}},function(t,e,n){"use strict";(function(e){function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e){for(var n=-1,r=t?t.length:0,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o}function o(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t}function i(t,e,n,r,u){var a=-1,s=t.length;for(n||(n=c),u||(u=[]);++a<s;){var f=t[a];e>0&&n(f)?e>1?i(f,e-1,n,r,u):o(u,f):r||(u[u.length]=f)}return u}function u(t,e){return t=Object(t),a(t,e,function(e,n){return n in t})}function a(t,e,n){for(var r=-1,o=e.length,i={};++r<o;){var u=e[r],a=t[u];n(a,u)&&(i[u]=a)}return i}function c(t){return M(t)||f(t)||!!(C&&t&&t[C])}function s(t){if("string"==typeof t||b(t))return t;var e=t+"";return"0"==e&&1/t==-g?"-0":e}function f(t){return p(t)&&A.call(t,"callee")&&(!I.call(t,"callee")||T.call(t)==w)}function l(t){return null!=t&&y(t.length)&&!d(t)}function p(t){return v(t)&&l(t)}function d(t){var e=h(t)?T.call(t):"";return e==j||e==O}function y(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=_}function h(t){var e=void 0===t?"undefined":m(t);return!!t&&("object"==e||"function"==e)}function v(t){return!!t&&"object"==(void 0===t?"undefined":m(t))}function b(t){return"symbol"==(void 0===t?"undefined":m(t))||v(t)&&T.call(t)==E}var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g=1/0,_=9007199254740991,w="[object Arguments]",j="[object Function]",O="[object GeneratorFunction]",E="[object Symbol]",S="object"==(void 0===e?"undefined":m(e))&&e&&e.Object===Object&&e,x="object"==("undefined"==typeof self?"undefined":m(self))&&self&&self.Object===Object&&self,k=S||x||Function("return this")(),P=Object.prototype,A=P.hasOwnProperty,T=P.toString,F=k.Symbol,I=P.propertyIsEnumerable,C=F?F.isConcatSpreadable:void 0,z=Math.max,M=Array.isArray,R=function(t,e){return e=z(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=z(r.length-e,0),u=Array(i);++o<i;)u[o]=r[e+o];o=-1;for(var a=Array(e+1);++o<e;)a[o]=r[o];return a[e]=u,n(t,this,a)}}(function(t,e){return null==t?{}:u(t,r(i(e,1),s))});t.exports=R}).call(e,n(1))},function(t,e,n){"use strict";(function(e){function n(t,e){return null==t?void 0:t[e]}function r(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function o(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function u(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function a(t,e){for(var n=t.length;n--;)if(_(t[n][0],e))return n;return-1}function c(t,e){for(var n=0,r=(e=y(e,t)?[e]:l(e)).length;null!=t&&n<r;)t=t[b(e[n++])];return n&&n==r?t:void 0}function s(t){return!(!j(t)||v(t))&&(w(t)||r(t)?Y:V).test(m(t))}function f(t){if("string"==typeof t)return t;if(E(t))return rt?rt.call(t):"";var e=t+"";return"0"==e&&1/t==-A?"-0":e}function l(t){return it(t)?t:ot(t)}function p(t,e){var n=t.__data__;return h(e)?n["string"==typeof e?"string":"hash"]:n.map}function d(t,e){var r=n(t,e);return s(r)?r:void 0}function y(t,e){if(it(t))return!1;var n=void 0===t?"undefined":x(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!E(t))||(z.test(t)||!C.test(t)||null!=e&&t in Object(e))}function h(t){var e=void 0===t?"undefined":x(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function v(t){return!!H&&H in t}function b(t){if("string"==typeof t||E(t))return t;var e=t+"";return"0"==e&&1/t==-A?"-0":e}function m(t){if(null!=t){try{return X.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function g(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(k);var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(g.Cache||u),n}function _(t,e){return t===e||t!==t&&e!==e}function w(t){var e=j(t)?W.call(t):"";return e==T||e==F}function j(t){var e=void 0===t?"undefined":x(t);return!!t&&("object"==e||"function"==e)}function O(t){return!!t&&"object"==(void 0===t?"undefined":x(t))}function E(t){return"symbol"==(void 0===t?"undefined":x(t))||O(t)&&W.call(t)==I}function S(t){return null==t?"":f(t)}var x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k="Expected a function",P="__lodash_hash_undefined__",A=1/0,T="[object Function]",F="[object GeneratorFunction]",I="[object Symbol]",C=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,z=/^\w*$/,M=/^\./,R=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$=/[\\^$.*+?()[\]{}|]/g,D=/\\(\\)?/g,V=/^\[object .+?Constructor\]$/,N="object"==(void 0===e?"undefined":x(e))&&e&&e.Object===Object&&e,L="object"==("undefined"==typeof self?"undefined":x(self))&&self&&self.Object===Object&&self,q=N||L||Function("return this")(),U=Array.prototype,B=Function.prototype,G=Object.prototype,K=q["__core-js_shared__"],H=function(){var t=/[^.]+$/.exec(K&&K.keys&&K.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),X=B.toString,J=G.hasOwnProperty,W=G.toString,Y=RegExp("^"+X.call(J).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Z=q.Symbol,Q=U.splice,tt=d(q,"Map"),et=d(Object,"create"),nt=Z?Z.prototype:void 0,rt=nt?nt.toString:void 0;o.prototype.clear=function(){this.__data__=et?et(null):{}},o.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},o.prototype.get=function(t){var e=this.__data__;if(et){var n=e[t];return n===P?void 0:n}return J.call(e,t)?e[t]:void 0},o.prototype.has=function(t){var e=this.__data__;return et?void 0!==e[t]:J.call(e,t)},o.prototype.set=function(t,e){return this.__data__[t]=et&&void 0===e?P:e,this},i.prototype.clear=function(){this.__data__=[]},i.prototype.delete=function(t){var e=this.__data__,n=a(e,t);return!(n<0||(n==e.length-1?e.pop():Q.call(e,n,1),0))},i.prototype.get=function(t){var e=this.__data__,n=a(e,t);return n<0?void 0:e[n][1]},i.prototype.has=function(t){return a(this.__data__,t)>-1},i.prototype.set=function(t,e){var n=this.__data__,r=a(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},u.prototype.clear=function(){this.__data__={hash:new o,map:new(tt||i),string:new o}},u.prototype.delete=function(t){return p(this,t).delete(t)},u.prototype.get=function(t){return p(this,t).get(t)},u.prototype.has=function(t){return p(this,t).has(t)},u.prototype.set=function(t,e){return p(this,t).set(t,e),this};var ot=g(function(t){t=S(t);var e=[];return M.test(t)&&e.push(""),t.replace(R,function(t,n,r,o){e.push(r?o.replace(D,"$1"):n||t)}),e});g.Cache=u;var it=Array.isArray;t.exports=function(t,e,n){var r=null==t?void 0:c(t,e);return void 0===r?n:r}}).call(e,n(1))},function(t,e,n){"use strict";(function(e){function n(t,e){return null==t?void 0:t[e]}function r(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function o(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function i(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function u(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function a(t,e,n){var r=t[e];Q.call(t,e)&&j(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function c(t,e){for(var n=t.length;n--;)if(j(t[n][0],e))return n;return-1}function s(t){return!(!E(t)||m(t))&&(O(t)||r(t)?et:q).test(_(t))}function f(t,e,n,r){if(!E(t))return t;for(var o=-1,i=(e=v(e,t)?[e]:p(e)).length,u=i-1,c=t;null!=c&&++o<i;){var s=g(e[o]),f=n;if(o!=u){var l=c[s];void 0===(f=r?r(l,s,c):void 0)&&(f=E(l)?l:h(e[o+1])?[]:{})}a(c,s,f),c=c[s]}return t}function l(t){if("string"==typeof t)return t;if(x(t))return at?at.call(t):"";var e=t+"";return"0"==e&&1/t==-F?"-0":e}function p(t){return st(t)?t:ct(t)}function d(t,e){var n=t.__data__;return b(e)?n["string"==typeof e?"string":"hash"]:n.map}function y(t,e){var r=n(t,e);return s(r)?r:void 0}function h(t,e){return!!(e=null==e?I:e)&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<e}function v(t,e){if(st(t))return!1;var n=void 0===t?"undefined":P(t);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!x(t))||($.test(t)||!R.test(t)||null!=e&&t in Object(e))}function b(t){var e=void 0===t?"undefined":P(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function m(t){return!!Y&&Y in t}function g(t){if("string"==typeof t||x(t))return t;var e=t+"";return"0"==e&&1/t==-F?"-0":e}function _(t){if(null!=t){try{return Z.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function w(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(A);var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var u=t.apply(this,r);return n.cache=i.set(o,u),u};return n.cache=new(w.Cache||u),n}function j(t,e){return t===e||t!==t&&e!==e}function O(t){var e=E(t)?tt.call(t):"";return e==C||e==z}function E(t){var e=void 0===t?"undefined":P(t);return!!t&&("object"==e||"function"==e)}function S(t){return!!t&&"object"==(void 0===t?"undefined":P(t))}function x(t){return"symbol"==(void 0===t?"undefined":P(t))||S(t)&&tt.call(t)==M}function k(t){return null==t?"":l(t)}var P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A="Expected a function",T="__lodash_hash_undefined__",F=1/0,I=9007199254740991,C="[object Function]",z="[object GeneratorFunction]",M="[object Symbol]",R=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,$=/^\w*$/,D=/^\./,V=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,N=/[\\^$.*+?()[\]{}|]/g,L=/\\(\\)?/g,q=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,B="object"==(void 0===e?"undefined":P(e))&&e&&e.Object===Object&&e,G="object"==("undefined"==typeof self?"undefined":P(self))&&self&&self.Object===Object&&self,K=B||G||Function("return this")(),H=Array.prototype,X=Function.prototype,J=Object.prototype,W=K["__core-js_shared__"],Y=function(){var t=/[^.]+$/.exec(W&&W.keys&&W.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Z=X.toString,Q=J.hasOwnProperty,tt=J.toString,et=RegExp("^"+Z.call(Q).replace(N,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=K.Symbol,rt=H.splice,ot=y(K,"Map"),it=y(Object,"create"),ut=nt?nt.prototype:void 0,at=ut?ut.toString:void 0;o.prototype.clear=function(){this.__data__=it?it(null):{}},o.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},o.prototype.get=function(t){var e=this.__data__;if(it){var n=e[t];return n===T?void 0:n}return Q.call(e,t)?e[t]:void 0},o.prototype.has=function(t){var e=this.__data__;return it?void 0!==e[t]:Q.call(e,t)},o.prototype.set=function(t,e){return this.__data__[t]=it&&void 0===e?T:e,this},i.prototype.clear=function(){this.__data__=[]},i.prototype.delete=function(t){var e=this.__data__,n=c(e,t);return!(n<0||(n==e.length-1?e.pop():rt.call(e,n,1),0))},i.prototype.get=function(t){var e=this.__data__,n=c(e,t);return n<0?void 0:e[n][1]},i.prototype.has=function(t){return c(this.__data__,t)>-1},i.prototype.set=function(t,e){var n=this.__data__,r=c(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},u.prototype.clear=function(){this.__data__={hash:new o,map:new(ot||i),string:new o}},u.prototype.delete=function(t){return d(this,t).delete(t)},u.prototype.get=function(t){return d(this,t).get(t)},u.prototype.has=function(t){return d(this,t).has(t)},u.prototype.set=function(t,e){return d(this,t).set(t,e),this};var ct=w(function(t){t=k(t);var e=[];return D.test(t)&&e.push(""),t.replace(V,function(t,n,r,o){e.push(r?o.replace(L,"$1"):n||t)}),e});w.Cache=u;var st=Array.isArray;t.exports=function(t,e,n){return null==t?t:f(t,e,n)}}).call(e,n(1))},function(t,e,n){"use strict";var r,o,i,u,a,c,s,f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=n(14),p=n(28),d=Function.prototype.apply,y=Function.prototype.call,h=Object.create,v=Object.defineProperty,b=Object.defineProperties,m=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};a={on:r=function(t,e){var n;return p(e),m.call(this,"__ee__")?n=this.__ee__:(n=g.value=h(null),v(this,"__ee__",g),g.value=null),n[t]?"object"===f(n[t])?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:o=function(t,e){var n,o;return p(e),o=this,r.call(this,t,n=function(){i.call(o,t,n),d.call(e,this,arguments)}),n.__eeOnceListener__=e,this},off:i=function(t,e){var n,r,o,i;if(p(e),!m.call(this,"__ee__"))return this;if(!(n=this.__ee__)[t])return this;if("object"===(void 0===(r=n[t])?"undefined":f(r)))for(i=0;o=r[i];++i)o!==e&&o.__eeOnceListener__!==e||(2===r.length?n[t]=r[i?0:1]:r.splice(i,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:u=function(t){var e,n,r,o,i;if(m.call(this,"__ee__")&&(o=this.__ee__[t]))if("object"===(void 0===o?"undefined":f(o))){for(n=arguments.length,i=new Array(n-1),e=1;e<n;++e)i[e-1]=arguments[e];for(o=o.slice(),e=0;r=o[e];++e)d.call(r,this,i)}else switch(arguments.length){case 1:y.call(o,this);break;case 2:y.call(o,this,arguments[1]);break;case 3:y.call(o,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,i=new Array(n-1),e=1;e<n;++e)i[e-1]=arguments[e];d.call(o,this,i)}}},c={on:l(r),once:l(o),off:l(i),emit:l(u)},s=b({},c),t.exports=e=function(t){return null==t?h(s):b(Object(t),c)},e.methods=a},function(t,e,n){"use strict";var r=n(15),o=n(23),i=n(24),u=n(25);(t.exports=function(t,e){var n,i,a,c,s;return arguments.length<2||"string"!=typeof t?(c=e,e=t,t=null):c=arguments[2],null==t?(n=a=!0,i=!1):(n=u.call(t,"c"),i=u.call(t,"e"),a=u.call(t,"w")),s={value:e,configurable:n,enumerable:i,writable:a},c?r(o(c),s):s}).gs=function(t,e,n){var a,c,s,f;return"string"!=typeof t?(s=n,n=e,e=t,t=null):s=arguments[3],null==e?e=void 0:i(e)?null==n?n=void 0:i(n)||(s=n,n=void 0):(s=e,e=n=void 0),null==t?(a=!0,c=!1):(a=u.call(t,"c"),c=u.call(t,"e")),f={get:e,set:n,configurable:a,enumerable:c},s?r(o(s),f):f}},function(t,e,n){"use strict";t.exports=n(16)()?Object.assign:n(17)},function(t,e,n){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,n){"use strict";var r=n(18),o=n(22),i=Math.max;t.exports=function(t,e){var n,u,a,c=i(arguments.length,2);for(t=Object(o(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},u=1;u<c;++u)e=arguments[u],r(e).forEach(a);if(void 0!==n)throw n;return t}},function(t,e,n){"use strict";t.exports=n(19)()?Object.keys:n(20)},function(t,e,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,n){"use strict";var r=n(2),o=Object.keys;t.exports=function(t){return o(r(t)?Object(t):t)}},function(t,e,n){"use strict";t.exports=function(){}},function(t,e,n){"use strict";var r=n(2);t.exports=function(t){if(!r(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,n){"use strict";var r=n(2),o=Array.prototype.forEach,i=Object.create,u=function(t,e){var n;for(n in t)e[n]=t[n]};t.exports=function(t){var e=i(null);return o.call(arguments,function(t){r(t)&&u(Object(t),e)}),e}},function(t,e,n){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,n){"use strict";t.exports=n(26)()?String.prototype.contains:n(27)},function(t,e,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(!0===r.contains("dwa")&&!1===r.contains("foo"))}},function(t,e,n){"use strict";var r=String.prototype.indexOf;t.exports=function(t){return r.call(this,t,arguments[1])>-1}},function(t,e,n){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,n){"use strict";(function(t){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(t,e,o){var i=function t(e,n,r){r=u.extend({},u.options,r);var o,i,a=u.runValidations(e,n,r);for(o in a)for(i in a[o])if(u.isPromise(a[o][i]))throw new Error("Use validate.async if you want support for promises");return t.processValidationResults(a,r)},u=i;u.extend=function(t){return[].slice.call(arguments,1).forEach(function(e){for(var n in e)t[n]=e[n]}),t},u.extend(i,{version:{major:0,minor:11,patch:1,metadata:null,toString:function(){var t=u.format("%{major}.%{minor}.%{patch}",u.version);return u.isEmpty(u.version.metadata)||(t+="+"+u.version.metadata),t}},Promise:"undefined"!=typeof Promise?Promise:null,EMPTY_STRING_REGEXP:/^\s*$/,runValidations:function(t,e,n){var r,o,i,a,c,s,f,l=[];(u.isDomElement(t)||u.isJqueryElement(t))&&(t=u.collectFormValues(t));for(r in e){i=u.getDeepObjectValue(t,r),a=u.result(e[r],i,t,r,n,e);for(o in a){if(!(c=u.validators[o]))throw f=u.format("Unknown validator %{name}",{name:o}),new Error(f);s=a[o],(s=u.result(s,i,t,r,n,e))&&l.push({attribute:r,value:i,validator:o,globalOptions:n,attributes:t,options:s,error:c.call(c,i,s,r,t,n)})}}return l},processValidationResults:function(t,e){t=u.pruneEmptyErrors(t,e),t=u.expandMultipleErrors(t,e),t=u.convertErrorMessages(t,e);var n=e.format||"grouped";if("function"!=typeof u.formatters[n])throw new Error(u.format("Unknown format %{format}",e));return t=u.formatters[n](t),u.isEmpty(t)?void 0:t},async:function(t,e,n){var r=(n=u.extend({},u.async.options,n)).wrapErrors||function(t){return t};!1!==n.cleanAttributes&&(t=u.cleanAttributes(t,e));var o=u.runValidations(t,e,n);return new u.Promise(function(i,a){u.waitForResults(o).then(function(){var c=u.processValidationResults(o,n);c?a(new r(c,n,t,e)):i(t)},function(t){a(t)})})},single:function(t,e,n){return n=u.extend({},u.single.options,n,{format:"flat",fullMessages:!1}),u({single:t},{single:e},n)},waitForResults:function(t){return t.reduce(function(t,e){return u.isPromise(e.error)?t.then(function(){return e.error.then(function(t){e.error=t||null})}):t},new u.Promise(function(t){t()}))},result:function(t){var e=[].slice.call(arguments,1);return"function"==typeof t&&(t=t.apply(null,e)),t},isNumber:function(t){return"number"==typeof t&&!isNaN(t)},isFunction:function(t){return"function"==typeof t},isInteger:function(t){return u.isNumber(t)&&t%1==0},isBoolean:function(t){return"boolean"==typeof t},isObject:function(t){return t===Object(t)},isDate:function(t){return t instanceof Date},isDefined:function(t){return null!==t&&void 0!==t},isPromise:function(t){return!!t&&u.isFunction(t.then)},isJqueryElement:function(t){return t&&u.isString(t.jquery)},isDomElement:function(t){return!!t&&(!(!t.querySelectorAll||!t.querySelector)&&(!(!u.isObject(document)||t!==document)||("object"===("undefined"==typeof HTMLElement?"undefined":r(HTMLElement))?t instanceof HTMLElement:t&&"object"===(void 0===t?"undefined":r(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName)))},isEmpty:function(t){var e;if(!u.isDefined(t))return!0;if(u.isFunction(t))return!1;if(u.isString(t))return u.EMPTY_STRING_REGEXP.test(t);if(u.isArray(t))return 0===t.length;if(u.isDate(t))return!1;if(u.isObject(t)){for(e in t)return!1;return!0}return!1},format:u.extend(function(t,e){return u.isString(t)?t.replace(u.format.FORMAT_REGEXP,function(t,n,r){return"%"===n?"%{"+r+"}":String(e[r])}):t},{FORMAT_REGEXP:/(%?)%\{([^\}]+)\}/g}),prettify:function(t){return u.isNumber(t)?100*t%1==0?""+t:parseFloat(Math.round(100*t)/100).toFixed(2):u.isArray(t)?t.map(function(t){return u.prettify(t)}).join(", "):u.isObject(t)?t.toString():(t=""+t).replace(/([^\s])\.([^\s])/g,"$1 $2").replace(/\\+/g,"").replace(/[_-]/g," ").replace(/([a-z])([A-Z])/g,function(t,e,n){return e+" "+n.toLowerCase()}).toLowerCase()},stringifyValue:function(t){return u.prettify(t)},isString:function(t){return"string"==typeof t},isArray:function(t){return"[object Array]"==={}.toString.call(t)},isHash:function(t){return u.isObject(t)&&!u.isArray(t)&&!u.isFunction(t)},contains:function(t,e){return!!u.isDefined(t)&&(u.isArray(t)?-1!==t.indexOf(e):e in t)},unique:function(t){return u.isArray(t)?t.filter(function(t,e,n){return n.indexOf(t)==e}):t},forEachKeyInKeypath:function(t,e,n){if(u.isString(e)){var r,o="",i=!1;for(r=0;r<e.length;++r)switch(e[r]){case".":i?(i=!1,o+="."):(t=n(t,o,!1),o="");break;case"\\":i?(i=!1,o+="\\"):i=!0;break;default:i=!1,o+=e[r]}return n(t,o,!0)}},getDeepObjectValue:function(t,e){if(u.isObject(t))return u.forEachKeyInKeypath(t,e,function(t,e){if(u.isObject(t))return t[e]})},collectFormValues:function(t,e){var n,r,o,i,a,c,s={};if(u.isJqueryElement(t)&&(t=t[0]),!t)return s;for(e=e||{},i=t.querySelectorAll("input[name], textarea[name]"),n=0;n<i.length;++n)o=i.item(n),u.isDefined(o.getAttribute("data-ignored"))||(c=u.sanitizeFormValue(o.value,e),"number"===o.type?c=c?+c:null:"checkbox"===o.type?o.attributes.value?o.checked||(c=s[o.name]||null):c=o.checked:"radio"===o.type&&(o.checked||(c=s[o.name]||null)),s[o.name]=c);for(i=t.querySelectorAll("select[name]"),n=0;n<i.length;++n){if((o=i.item(n)).multiple){c=[];for(r in o.options)(a=o.options[r]).selected&&c.push(u.sanitizeFormValue(a.value,e))}else c=u.sanitizeFormValue(o.options[o.selectedIndex].value,e);s[o.name]=c}return s},sanitizeFormValue:function(t,e){return e.trim&&u.isString(t)&&(t=t.trim()),!1!==e.nullify&&""===t?null:t},capitalize:function(t){return u.isString(t)?t[0].toUpperCase()+t.slice(1):t},pruneEmptyErrors:function(t){return t.filter(function(t){return!u.isEmpty(t.error)})},expandMultipleErrors:function(t){var e=[];return t.forEach(function(t){u.isArray(t.error)?t.error.forEach(function(n){e.push(u.extend({},t,{error:n}))}):e.push(t)}),e},convertErrorMessages:function(t,e){e=e||{};var n=[];return t.forEach(function(t){var r=u.result(t.error,t.value,t.attribute,t.options,t.attributes,t.globalOptions);u.isString(r)?("^"===r[0]?r=r.slice(1):!1!==e.fullMessages&&(r=u.capitalize(u.prettify(t.attribute))+" "+r),r=r.replace(/\\\^/g,"^"),r=u.format(r,{value:u.stringifyValue(t.value)}),n.push(u.extend({},t,{error:r}))):n.push(t)}),n},groupErrorsByAttribute:function(t){var e={};return t.forEach(function(t){var n=e[t.attribute];n?n.push(t):e[t.attribute]=[t]}),e},flattenErrorsToArray:function(t){return t.map(function(t){return t.error}).filter(function(t,e,n){return n.indexOf(t)===e})},cleanAttributes:function(t,e){function n(t,e,n){return u.isObject(t[e])?t[e]:t[e]=!!n||{}}function r(t,e){if(!u.isObject(t))return t;var n,o,i=u.extend({},t);for(o in t)n=e[o],u.isObject(n)?i[o]=r(i[o],n):n||delete i[o];return i}return u.isObject(e)&&u.isObject(t)?(e=function(t){var e,r={};for(e in t)t[e]&&u.forEachKeyInKeypath(r,e,n);return r}(e),r(t,e)):{}},exposeModule:function(t,e,n,r,o){n?(r&&r.exports&&(n=r.exports=t),n.validate=t):(e.validate=t,t.isFunction(o)&&o.amd&&o([],function(){return t}))},warn:function(t){"undefined"!=typeof console&&console.warn&&console.warn("[validate.js] "+t)},error:function(t){"undefined"!=typeof console&&console.error&&console.error("[validate.js] "+t)}}),i.validators={presence:function(t,e){if((e=u.extend({},this.options,e)).allowEmpty?!u.isDefined(t):u.isEmpty(t))return e.message||this.message||"can't be blank"},length:function(t,e,n){if(u.isDefined(t)){var r,o=(e=u.extend({},this.options,e)).is,i=e.maximum,a=e.minimum,c=[],s=(t=(e.tokenizer||function(t){return t})(t)).length;return u.isNumber(s)?(u.isNumber(o)&&s!==o&&(r=e.wrongLength||this.wrongLength||"is the wrong length (should be %{count} characters)",c.push(u.format(r,{count:o}))),u.isNumber(a)&&s<a&&(r=e.tooShort||this.tooShort||"is too short (minimum is %{count} characters)",c.push(u.format(r,{count:a}))),u.isNumber(i)&&s>i&&(r=e.tooLong||this.tooLong||"is too long (maximum is %{count} characters)",c.push(u.format(r,{count:i}))),c.length>0?e.message||c:void 0):(u.error(u.format("Attribute %{attr} has a non numeric value for `length`",{attr:n})),e.message||this.notValid||"has an incorrect length")}},numericality:function(t,e){if(u.isDefined(t)){e=u.extend({},this.options,e);var n,r,o=[],i={greaterThan:function(t,e){return t>e},greaterThanOrEqualTo:function(t,e){return t>=e},equalTo:function(t,e){return t===e},lessThan:function(t,e){return t<e},lessThanOrEqualTo:function(t,e){return t<=e},divisibleBy:function(t,e){return t%e==0}};if(u.isString(t)&&e.strict){var a="^(0|[1-9]\\d*)";if(e.onlyInteger||(a+="(\\.\\d+)?"),a+="$",!new RegExp(a).test(t))return e.message||e.notValid||this.notValid||this.message||"must be a valid number"}if(!0!==e.noStrings&&u.isString(t)&&!u.isEmpty(t)&&(t=+t),!u.isNumber(t))return e.message||e.notValid||this.notValid||this.message||"is not a number";if(e.onlyInteger&&!u.isInteger(t))return e.message||e.notInteger||this.notInteger||this.message||"must be an integer";for(n in i)if(r=e[n],u.isNumber(r)&&!i[n](t,r)){var c="not"+u.capitalize(n),s=e[c]||this[c]||this.message||"must be %{type} %{count}";o.push(u.format(s,{count:r,type:u.prettify(n)}))}return e.odd&&t%2!=1&&o.push(e.notOdd||this.notOdd||this.message||"must be odd"),e.even&&t%2!=0&&o.push(e.notEven||this.notEven||this.message||"must be even"),o.length?e.message||o:void 0}},datetime:u.extend(function(t,e){if(!u.isFunction(this.parse)||!u.isFunction(this.format))throw new Error("Both the parse and format functions needs to be set to use the datetime/date validator");if(u.isDefined(t)){var n,r=[],o=(e=u.extend({},this.options,e)).earliest?this.parse(e.earliest,e):NaN,i=e.latest?this.parse(e.latest,e):NaN;return t=this.parse(t,e),isNaN(t)||e.dateOnly&&t%864e5!=0?(n=e.notValid||e.message||this.notValid||"must be a valid date",u.format(n,{value:arguments[0]})):(!isNaN(o)&&t<o&&(n=e.tooEarly||e.message||this.tooEarly||"must be no earlier than %{date}",n=u.format(n,{value:this.format(t,e),date:this.format(o,e)}),r.push(n)),!isNaN(i)&&t>i&&(n=e.tooLate||e.message||this.tooLate||"must be no later than %{date}",n=u.format(n,{date:this.format(i,e),value:this.format(t,e)}),r.push(n)),r.length?u.unique(r):void 0)}},{parse:null,format:null}),date:function(t,e){return e=u.extend({},e,{dateOnly:!0}),u.validators.datetime.call(u.validators.datetime,t,e)},format:function(t,e){(u.isString(e)||e instanceof RegExp)&&(e={pattern:e});var n,r=(e=u.extend({},this.options,e)).message||this.message||"is invalid",o=e.pattern;if(u.isDefined(t))return u.isString(t)?(u.isString(o)&&(o=new RegExp(e.pattern,e.flags)),(n=o.exec(t))&&n[0].length==t.length?void 0:r):r},inclusion:function(t,e){if(u.isDefined(t)&&(u.isArray(e)&&(e={within:e}),e=u.extend({},this.options,e),!u.contains(e.within,t))){var n=e.message||this.message||"^%{value} is not included in the list";return u.format(n,{value:t})}},exclusion:function(t,e){if(u.isDefined(t)&&(u.isArray(e)&&(e={within:e}),e=u.extend({},this.options,e),u.contains(e.within,t))){var n=e.message||this.message||"^%{value} is restricted";return u.format(n,{value:t})}},email:u.extend(function(t,e){var n=(e=u.extend({},this.options,e)).message||this.message||"is not a valid email";if(u.isDefined(t))return u.isString(t)&&this.PATTERN.exec(t)?void 0:n},{PATTERN:/^[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9\u007F-\uffff!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z]{2,}$/i}),equality:function(t,e,n,r){if(u.isDefined(t)){u.isString(e)&&(e={attribute:e});var o=(e=u.extend({},this.options,e)).message||this.message||"is not equal to %{attribute}";if(u.isEmpty(e.attribute)||!u.isString(e.attribute))throw new Error("The attribute must be a non empty string");var i=u.getDeepObjectValue(r,e.attribute);return(e.comparator||function(t,e){return t===e})(t,i,e,n,r)?void 0:u.format(o,{attribute:u.prettify(e.attribute)})}},url:function(t,e){if(u.isDefined(t)){var n=(e=u.extend({},this.options,e)).message||this.message||"is not a valid url",r=e.schemes||this.schemes||["http","https"],o=e.allowLocal||this.allowLocal||!1;if(!u.isString(t))return n;var i="^(?:(?:"+r.join("|")+")://)(?:\\S+(?::\\S*)?@)?(?:",a="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))";return o?a+="?":i+="(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})",i+="(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*"+a+")(?::\\d{2,5})?(?:[/?#]\\S*)?$",new RegExp(i,"i").exec(t)?void 0:n}}},i.formatters={detailed:function(t){return t},flat:u.flattenErrorsToArray,grouped:function(t){var e;t=u.groupErrorsByAttribute(t);for(e in t)t[e]=u.flattenErrorsToArray(t[e]);return t},constraint:function(t){var e;t=u.groupErrorsByAttribute(t);for(e in t)t[e]=t[e].map(function(t){return t.validator}).sort();return t}},i.exposeModule(i,this,t,e,n(8))}).call(void 0,e,t,n(8))}).call(e,n(7)(t))},function(t,e,n){"use strict";t.exports=n(31)},function(t,e,n){"use strict";function r(t,e,n,f){var l,p;return e=o(arguments,1,Error,a,[c,i]),n=o(arguments,2,{},c,[i]),f=o(arguments,3,s,i,[]),t=o(arguments,0,e===Error?"Error":e.prototype.CustomError.name,u,[a,c,i]),(p=e===Error)&&f===s&&(f=r.factory.root),l=function(e,n){var o,i,u,a,c,f;if(!(this instanceof l))return new l(e,n);for(delete this.constructor.name,Object.defineProperty(this.constructor,"name",{enumerable:!1,configurable:!0,value:t,writable:!1}),"string"==typeof e&&(e={message:e}),e||(e={}),(i=this.CustomError.chain.slice(0).reverse().map(function(t){return t.properties})).push(e),i.unshift({}),f=Object.assign.apply(Object,i),o=this,u={},Object.keys(r.factory).forEach(function(t){u[t]=function(e,n){r.factory[t].call(o,e,n,u)}}),a=this.CustomError.chain.length-1;a>=0;a--)(c=this.CustomError.chain[a]).factory!==s&&c.factory.call(this,f,n,u)},l.prototype=Object.create(e.prototype),l.prototype.constructor=l,l.prototype.name=t,l.prototype.CustomError={chain:p?[]:e.prototype.CustomError.chain.slice(0),factory:f,name:t,parent:e,properties:n},l.prototype.CustomError.chain.unshift(l.prototype.CustomError),l.prototype.toString=function(){var t=this.CustomError.chain[this.CustomError.chain.length-1].name;return this.code&&(t+=" "+this.code),this.message&&(t+=": "+this.message),t},l}function o(t,e,n,r,o){var i,u,a,c=-1,s=-1,f=e<t.length?e:t.length;for(i=0;i<=f;i++){if(a=t[i],-1===c)for(u=0;u<o.length;u++)o[u](a)&&(c=i);-1===s&&r(a)&&(s=i)}if(-1!==s&&-1!==c&&c<s)throw new l.order;return-1!==s?t[s]:n}function i(t){return"function"==typeof t&&t!==Error&&!t.prototype.CustomError}function u(t){return"string"==typeof t}function a(t){return"function"==typeof t&&(t===Error||t.prototype.CustomError)}function c(t){return t&&"object"===(void 0===t?"undefined":f(t))}function s(){}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r,r.factory=n(32);var l=r("CustomError");l.order=r(l,{message:"Arguments out of order.",code:"EOARG"})},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.expectReceive=function(t,e,n){var r;n.root(t,e,n),r=this.message,t.hasOwnProperty("expected")&&(r+=" Expected "+t.expected+"."),t.hasOwnProperty("received")&&(r+=" Received: "+t.received+"."),this.message=r},e.root=function(t,e,n){function o(){u[0]=a.toString(),a.stack=u.join("\n")}var i,u,a=this,c={stackLength:Error.stackTraceLimit,rootOnly:!0},s="",f=Error.stackTraceLimit;e&&"object"===(void 0===e?"undefined":r(e))||(e={}),e.hasOwnProperty("stackLength")&&"number"==typeof e.stackLength&&!isNaN(e.stackLength)&&e.stackLength>=0&&(c.stackLength=e.stackLength),e.hasOwnProperty("rootOnly")||(c.rootOnly=e.rootOnly),c.rootOnly&&this.CustomError.parent!==Error||(Object.keys(t).forEach(function(e){switch(e){case"code":i=t.code||void 0;break;case"message":s=t.message||"";break;default:a[e]=t[e]}}),Error.stackTraceLimit=c.stackLength+2,(u=(new Error).stack.split("\n")).splice(0,3),u.unshift(""),Error.stackTraceLimit=f,this.stack=u.join("\n"),Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,get:function(){return i},set:function(t){i=t,o()}}),Object.defineProperty(this,"message",{configurable:!0,enumerable:!0,get:function(){return s},set:function(t){s=t,o()}}),o())}},function(t,e,n){"use strict";t.exports=function(t,e){return t.then(function(t){return"function"==typeof e.callback&&e.callback(null,t),"function"==typeof e.success&&e.success(t),t}).catch(function(t){return"function"==typeof e.callback?e.callback(t):"function"==typeof e.error?e.error(t):Promise.reject(t)})}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}t.exports=function t(e,n){r(this,t),this.type=e,this.response=n}},function(t,e,n){"use strict";var r=n(36),o=n(39),i=n(40),u=n(41);t.exports=[r,o,i,u]},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(5),c=n(0),s=n(3);t.exports={name:"Analytic",type:"player",initialize:function(t,e){return function(n){function f(n){r(this,f);var i=o(this,(f.__proto__||Object.getPrototypeOf(f)).call(this,t,{initialData:n,defaults:{_id:a(),dateCreated:(new Date).toString(),playerId:e.id},pluginId:"analytics",type:"player",player:e}));return i.middleware.save=i.saveMiddleware.bind(i),i}return i(f,c),u(f,[{key:"saveMiddleware",value:function(t){var e=t.body;return e.playerId||(e.playerId=this.player.id),t}}],[{key:"validate",value:function(t,e){return s(e,{dateCreated:{dataType:"string",presence:!0},playerId:{dataType:"string",presence:!0},type:{dataType:"string",presence:!0}})}}]),f}()}}},function(t,e,n){"use strict";(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var o=new Uint8Array(16);n=function(){return r.getRandomValues(o),o}}if(!n){var i=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}t.exports=n}).call(e,n(1))},function(t,e,n){"use strict";for(var r=[],o=0;o<256;++o)r[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){var n=e||0,o=r;return o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+"-"+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]+o[t[n++]]}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(5),a=n(0);t.exports={name:"Data",type:"game",initialize:function(t){return function(e){function n(e){return r(this,n),o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,{initialData:e,defaults:{_id:u()},pluginId:"gamedata",type:"game"}))}return i(n,a),n}()}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=n(5),a=n(0);t.exports={name:"Data",type:"player",initialize:function(t,e){return function(n){function c(n){return r(this,c),o(this,(c.__proto__||Object.getPrototypeOf(c)).call(this,t,{initialData:n,defaults:{_id:u()},pluginId:"playerdata",type:"player",player:e}))}return i(c,a),c}()}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(6),c=n(3),s=n(4),f=n(9),l=n(0);t.exports={name:"Player",type:"core",initialize:function(t){var e=function(e){function n(e){r(this,n);var i=o(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t,{initialData:e,read:["_id","dateCreated","email","username"],write:["email","password","username"],pluginId:"players",type:"core"}));return e&&c.constructor(e,{username:{dataType:"string"},email:{dataType:"string"},password:{dataType:"string"}}),i.middleware.save=i.saveMiddleware.bind(i),n.plugins.forEach(function(e){i[e.name]=e.initialize(t,i)}),i}return i(n,l),u(n,[{key:"login",value:function(){var t=this,e=f.apply(void 0,arguments);return e.password=e.uri,e.uri=void 0,this.brinkbit.login(a({},this.data,e)).then(function(e){return t.token=e.token,t})}},{key:"logout",value:function(){this.token=void 0,this.isPrimary&&this.brinkbit.logout()}},{key:"promote",value:function(){this.brinkbit.promotePlayer(this)}},{key:"forgot",value:function(t){return this.brinkbit.forgot(t||this.data)}},{key:"saveMiddleware",value:function(t){return this.id?(t.body.username=void 0,t.body.password=void 0):(t.passToken=!1,t.body.gameId=t.body.gameId||this.brinkbit.gameId),t}},{key:"validate",value:function(t,e){switch(t){case"delete":return Promise.reject(new Error("Cannot delete user"));case"post":return c(e,{username:{dataType:"string",presence:!0},email:{dataType:"string",presence:!0},password:{dataType:"string",presence:!0}});case"put":return c(e,{username:{dataType:"string",presence:!1},email:{dataType:"string"},password:{dataType:"string",presence:!1}});default:return"string"==typeof this.id?Promise.resolve():Promise.reject(new s("Cannot fetch user without id"))}}}]),n}();return e.plugins=[],e}}}])});